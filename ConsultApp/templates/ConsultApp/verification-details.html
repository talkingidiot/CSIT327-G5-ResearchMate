{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ResearchMate ‚Äî Verification Details</title>
  <link rel="stylesheet" href="{% static 'ConsultApp/admin-dashboard.css'%}">
  <style>
    .document-item {
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 15px;
      background: #f9f9f9;
      margin-top: 15px;
    }
    
    .document-item h4 {
      margin: 0 0 10px 0;
      font-size: 14px;
      color: #555;
      font-weight: 600;
    }
    
    .proof-img {
      width: 100%;
      max-width: 500px;
      height: auto;
      border-radius: 6px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.2s;
    }
    
    .proof-img:hover {
      transform: scale(1.02);
    }
    
    .document-link {
      display: inline-block;
      padding: 10px 16px;
      background: #4CAF50;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      font-size: 14px;
      transition: background 0.3s;
    }
    
    .document-link:hover {
      background: #45a049;
    }
    
    .no-documents {
      text-align: center;
      padding: 30px;
      color: #999;
      font-style: italic;
    }

    /* Modal styles for image preview */
    .image-modal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.9);
    }
    
    .image-modal-content {
      margin: auto;
      display: block;
      max-width: 90%;
      max-height: 90%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    .image-modal-close {
      position: absolute;
      top: 20px;
      right: 35px;
      color: #f1f1f1;
      font-size: 40px;
      font-weight: bold;
      cursor: pointer;
    }
    
    .image-modal-close:hover {
      color: #bbb;
    }
  </style>
</head>
<body>
  <!-- Top Navigation -->
  <nav class="top-nav">
    <div class="logo">ResearchMate</div>
    
    <div class="nav-links">
      <a href="{% url 'admin_dashboard' %}">üìä Dashboard</a>
      <a href="{% url 'admin_students' %}">üë• Students</a>
      <a href="{% url 'admin_consultants' %}">üë®‚Äçüíº Consultants</a>
      <a href="{% url 'admin_profile' %}">üë§ Profile</a>
      <a href="{% url 'admin_reports' %}">üìä Reports</a>
    </div>

    <div class="user-section">
      <span class="admin-label">Admin</span>
      <form method="POST" action="{% url 'logout' %}" style="display: inline;">
        {% csrf_token %}
        <button type="submit" class="logout-btn">üö™ Logout</button>
      </form>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <div class="page-header">
      <h1>Consultant Verification</h1>
      <p>Review application details and documents</p>
    </div>

    <!-- Your existing verification content -->
    <div class="verification-details">
      <div class="detail-section">
        <h3>üë§ Personal Information</h3>
        <div class="detail-item">
          <label>Full Name</label>
          <p>{{ verification.consultant.get_full_name }}</p>
        </div>
        <div class="detail-item">
          <label>Email</label>
          <p>{{ verification.consultant.email }}</p>
        </div>
        <div class="detail-item">
          <label>Contact Number</label>
          <p>{{ verification.contact_number|default:"N/A" }}</p>
        </div>
      </div>

      <div class="detail-section">
        <h3>üíº Professional Details</h3>
        <div class="detail-item">
          <label>Expertise</label>
          <p>{{ verification.expertise }}</p>
        </div>
        <div class="detail-item">
          <label>Workplace</label>
          <p>{{ verification.workplace|default:"N/A" }}</p>
        </div>
        <div class="detail-item">
          <label>Qualification</label>
          <p>{{ verification.qualification|default:"N/A" }}</p>
        </div>
      </div>

      <div class="detail-section">
        <h3>üìé Uploaded Document</h3>
        {% if verification.proof_document %}
          <div class="document-item">
            <h4>üìÑ Submitted Document</h4>
            {% if verification.proof_document.url|lower|slice:"-4:" == ".jpg" or verification.proof_document.url|lower|slice:"-4:" == ".png" or verification.proof_document.url|lower|slice:"-5:" == ".jpeg" or verification.proof_document.url|lower|slice:"-4:" == ".gif" or verification.proof_document.url|lower|slice:"-5:" == ".webp" %}
              <img src="{{ verification.proof_document.url }}" alt="Verification Document" class="proof-img" onclick="openImageModal('{{ verification.proof_document.url }}')">
            {% else %}
              <a href="{{ verification.proof_document.url }}" target="_blank" class="document-link">üìÑ View Document</a>
            {% endif %}
          </div>
        {% else %}
          <div class="no-documents">
            <p>No document uploaded.</p>
          </div>
        {% endif %}
      </div>

      <div class="detail-section">
        <h3>üìÖ Submission Info</h3>
        <div class="detail-item">
          <label>Submitted On</label>
          <p>{{ verification.created_at|date:"M d, Y - h:i A" }}</p>
        </div>
        <div class="detail-item">
          <label>Status</label>
          <p>{{ verification.status|title }}</p>
        </div>
        {% if verification.reviewed_at %}
        <div class="detail-item">
          <label>Reviewed On</label>
          <p>{{ verification.reviewed_at|date:"M d, Y - h:i A" }}</p>
        </div>
        {% endif %}
      </div>

      <div style="margin-top: 20px; text-align: center;">
        {% if verification.status == 'pending' %}
          <form method="POST" action="{% url 'approve_consultant' verification.id %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn-approve">‚úì Approve</button>
          </form>

          <form method="POST" action="{% url 'reject_consultant' verification.id %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn-reject">‚úó Reject</button>
          </form>
        {% endif %}

        <a href="{% url 'admin_dashboard' %}">
          <button type="button" class="btn-view-details">‚¨Ö Back to Dashboard</button>
        </a>
      </div>
    </div>
  </main>

  <!-- Image Modal -->
  <div id="imageModal" class="image-modal" onclick="closeImageModal()">
    <span class="image-modal-close" onclick="closeImageModal()">&times;</span>
    <img class="image-modal-content" id="modalImage">
  </div>

  <script>
    function openImageModal(imageUrl) {
      var modal = document.getElementById("imageModal");
      var modalImg = document.getElementById("modalImage");
      modal.style.display = "block";
      modalImg.src = imageUrl;
    }

    function closeImageModal() {
      document.getElementById("imageModal").style.display = "none";
    }
  </script>
</body>
</html>