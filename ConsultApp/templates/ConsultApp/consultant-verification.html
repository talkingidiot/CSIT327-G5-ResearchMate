{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Consultant Verification</title>
  <link rel="stylesheet" href="{% static 'ConsultApp/verification.css'%}">
</head>
<body>
  <nav class="top-nav">
    <div class="logo">ResearchMate</div>
    
    <div class="nav-links">
      <a href="{% url 'consultant_dashboard' %}">üè† Dashboard</a>
      <a href="{% url 'consultant_profile' %}">üë§ My Profile</a>
      <a href="{% url 'consultant_students' %}">üßë‚Äçüéì Students</a>
      <a href="{% url 'consultant_appointments' %}">üìÖ Appointments</a>
      <a href="{% url 'consultant_history' %}">üìú History</a>
    </div>

    <div class="user-section">
      <span class="consultant-label">Consultant</span>
      <form method="POST" action="{% url 'logout' %}" style="display: inline;">
        {% csrf_token %}
        <button type="submit" class="logout-btn">üö™ Logout</button>
      </form>
    </div>
  </nav>

  <main class="main-content">
    {% if messages %}
      <div class="alert">
        {% for message in messages %}
          <p>{{ message }}</p>
        {% endfor %}
      </div>
    {% endif %}

    <div class="page-header">
      <div class="badge">üéì Consultant Access</div>
      <h1>Consultant Verification</h1>
      <p>Fill in your details to be verified and available for bookings</p>
    </div>

    <div class="info-box">
      <h4>‚ÑπÔ∏è Verification Process</h4>
      <p>Your application will be reviewed by our admin team within 2-3 business days. You'll receive an email notification once your verification is approved.</p>
    </div>

    <div class="form-card">
      <h2>üìã Verification Form</h2>
      
      <form id="verificationForm" method="POST" action="{% url 'consultant_verification' %}" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="form-section">
          <h3>üë§ Personal Information</h3>
          
          <div class="form-group">
            <label for="fullName">Full Name *</label>
            <input type="text" id="fullName" name="fullName" value="{{ user_full_name }}" 
              class="{% if field_errors.fullName %}input-error{% endif %}"
              pattern="[A-Za-z\s\-]+" title="Only letters, spaces, and hyphens allowed" required>
            {% if field_errors.fullName %}
                <span class="field-error">{{ field_errors.fullName }}</span>
            {% endif %}
          </div>

          <div class="form-group">
            <label for="contact">Contact Number (Philippine) *</label>
            <input type="tel" id="contact" name="contact" 
              class="{% if field_errors.contact %}input-error{% endif %}"
              value="{{ submitted_data.contact|default:'' }}" 
              placeholder="09XXXXXXXXX" required >
            {% if field_errors.contact %}
                <span class="field-error">{{ field_errors.contact }}</span>
            {% else %}
                <p class="file-hint">Format: 09XXXXXXXXX (11 digits)</p>
            {% endif %}
          </div>
        </div>

        <div class="form-section">
          <h3>üíº Professional Information</h3>
          
          <div class="form-group">
            <label>Expertise / Specialization * (Select all that apply)</label>
              <div class="expertise-grid" id="expertiseGrid">
                {% for option in expertise_options %}
                  <label class="expertise-option">
                    <input type="checkbox" name="expertise" value="{{ option }}"
                      {% if option in submitted_data.expertise_list %}checked{% endif %}>
                    <span>{{ option }}</span>
                  </label>
                {% endfor %}
              </div>
            {% if field_errors.expertise %}
                <span class="field-error">{{ field_errors.expertise }}</span>
            {% endif %}
          </div>

          <div class="form-group">
            <label for="workplace">Workplace *</label>
            <input type="text" id="workplace" name="workplace" 
              class="{% if field_errors.workplace %}input-error{% endif %}"
              value="{{ submitted_data.workplace|default:'' }}" required >
            {% if field_errors.workplace %}
                <span class="field-error">{{ field_errors.workplace }}</span>
            {% endif %}
          </div>

          <div class="form-group">
            <label for="qualification">Qualification *</label>
            <input type="text" id="qualification" name="qualification" 
              class="{% if field_errors.qualification %}input-error{% endif %}"
              value="{{ submitted_data.qualification|default:'' }}" required >
            {% if field_errors.qualification %}
                <span class="field-error">{{ field_errors.qualification }}</span>
            {% else %}
                <p class="file-hint">College degree or educational background</p>
            {% endif %}
          </div>

          <div class="form-group">
            <label for="bio">Short Bio</label>
            <textarea id="bio" name="bio" placeholder="Introduce yourself...">{{ submitted_data.bio|default:'' }}</textarea>
            <p class="file-hint">Tell us about your background and what makes you a great consultant (max 500 characters)</p>
          </div>
        </div>

        <div class="form-section">
          <h3>üìÑ Required Document</h3>
          <p style="color: #666; margin-bottom: 15px;">Upload the following documents for verification:</p>
          
          <div class="form-group">
            <label for="validId">Upload Valid ID</label>
            <input type="file" id="validId" name="validId" accept="image/jpeg,image/jpg,image/png,.pdf" required>
            {% if field_errors.validId %}
                <span class="field-error">{{ field_errors.validId }}</span>
            {% else %}
                <p class="file-hint">Government-issued ID (Driver's License, Passport, etc.) - JPG, PNG, or PDF </p>
            {% endif %}
          </div>

          <div class="form-group">
            <label for="license">Upload Professional License</label>
            <input type="file" id="license" name="license" accept="image/jpeg,image/jpg,image/png,.pdf" required>
            {% if field_errors.license %}
                <span class="field-error">{{ field_errors.license }}</span>
            {% else %}
                <p class="file-hint">Professional license or certification - JPG, PNG, or PDF</p>
            {% endif %}
          </div>

          <div class="form-group">
            <label for="profilePhoto">Upload Profile Photo with ID</label>
            <input type="file" id="profilePhoto" name="profilePhoto" accept="image/jpeg,image/jpg,image/png" required>
            {% if field_errors.profilePhoto %}
                <span class="field-error">{{ field_errors.profilePhoto }}</span>
            {% else %}
                <p class="file-hint">Professional photo holding your ID (JPG or PNG)</p>
            {% endif %}
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" id="submitVerification" class="btn-submit">
            Submit Verification Request
          </button>
          <button type="button" class="btn-cancel" onclick="window.location.href='{% url 'consultant_dashboard' %}'">
            Cancel
          </button>
        </div>
      </form>
    </div>
  </main>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const options = document.querySelectorAll('.expertise-option');

      options.forEach(option => {
        const checkbox = option.querySelector('input[type="checkbox"]');

        if (checkbox.checked) {
          option.classList.add('selected');
        }

        checkbox.addEventListener('change', function() {
          if (checkbox.checked) {
            option.classList.add('selected');
          } else {
            option.classList.remove('selected');
          }
        });
      });

      const contactInput = document.getElementById('contact');
      if (contactInput) {
        contactInput.addEventListener('input', function(e) {
          this.value = this.value.replace(/[^0-9]/g, '');
        });
      }
    });
  </script>
</body>
</html>