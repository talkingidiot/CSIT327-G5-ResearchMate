{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ResearchMate â€” Student Profile</title>
  <link rel="stylesheet" href="{% static 'ConsultApp/admin-dashboard.css'%}">
  <link rel="stylesheet" href="{% static 'ConsultApp/profile.css'%}">
</head>
<body>
  <!-- Top Navigation -->
  <nav class="top-nav">
    <div class="logo">ResearchMate</div>
    
    <div class="nav-links">
      <a href="{% url 'student_dashboard' %}">ğŸ  Dashboard</a>
      <a href="{% url 'student_profile' %}" class="active">ğŸ‘¤ Profile</a>
      <a href="{% url 'student_appointments' %}">ğŸ“… Appointments</a>
      <a href="{% url 'student_history' %}">ğŸ“œ History</a>
      <a href="#">â“ Help</a>
    </div>

    <div class="user-section">
      <span class="student-label">Student</span>
      <form method="POST" action="{% url 'logout' %}" style="display: inline;">
        {% csrf_token %}
        <button type="submit" class="logout-btn">ğŸšª Logout</button>
      </form>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Page Header -->
    <div class="page-header">
      <h1>Student Profile</h1>
      <p>Update your information to be displayed in your dashboard</p>
    </div>

    <!-- Profile Grid -->
    <div class="profile-grid">
      <!-- Profile Info Card -->
      <div class="profile-card">
        <div class="profile-avatar">ST</div>
        <h3 id="displayName">{{ student.user.get_full_name|default:"Student" }}</h3>
          <div class="info-item">
            <div class="info-label">Department</div>
            <div class="info-value">{{ student.student_department|default:"Not set" }}</div>
          </div>

          <div class="info-item">
            <div class="info-label">Program</div>
            <div class="info-value">{{ student.student_program|default:"Not set" }}</div>
          </div>

          <div class="info-item">
            <div class="info-label">Year Level</div>
            <div class="info-value">
              {% if student.student_year_level %}
                {{ student.student_year_level }}{% if student.student_year_level == 1 %}st{% elif student.student_year_level == 2 %}nd{% elif student.student_year_level == 3 %}rd{% else %}th{% endif %} Year
              {% else %}
                Not set
              {% endif %}
            </div>
          </div>
      </div>

      <!-- Edit Form -->
      <div class="form-card">
        <h2>Edit Profile Information</h2>
        <form method="POST" action="{% url 'student_profile' %}">
          {% csrf_token %}
          
          <div class="form-group">
            <label for="fullName">Full Name</label>
            <input type="text" name="fullName" id="fullName" value="{{ student.user.get_full_name }}" required>
          </div>

          <div class="form-group">
            <label for="department">Department</label>
            <select name="department" id="department">
              <option value="">Select Department</option>
              <option value="CCS" {% if student.student_department == "CCS" %}selected{% endif %}>College of Computer Studies</option>
              <option value="CEA" {% if student.student_department == "CEA" %}selected{% endif %}>College of Engineering and Architecture</option>
              <option value="CMBA" {% if student.student_department == "CMBA" %}selected{% endif %}>College of Management, Business & Accountancy</option>
              <option value="CAS" {% if student.student_department == "CAS" %}selected{% endif %}>College of Arts, Sciences, & Education</option>
              <option value="CNAHS" {% if student.student_department == "CNAHS" %}selected{% endif %}>College of Nursing & Allied Health Sciences</option>
              <option value="CCJ" {% if student.student_department == "CCJ" %}selected{% endif %}>College of Criminal Justice</option>
            </select>
          </div>

          <div class="form-group">
            <label for="program">Program</label>
            <input type="text" name="program" id="program" value="{{ student.student_program }}">
          </div>

          <div class="form-group">
            <label for="yearLevel">Year Level</label>
            <select name="yearLevel" id="yearLevel">
              <option value="0" {% if student.student_year_level == 0 %}selected{% endif %}>Select Year Level</option>
              <option value="1" {% if student.student_year_level == 1 %}selected{% endif %}>1st Year</option>
              <option value="2" {% if student.student_year_level == 2 %}selected{% endif %}>2nd Year</option>
              <option value="3" {% if student.student_year_level == 3 %}selected{% endif %}>3rd Year</option>
              <option value="4" {% if student.student_year_level == 4 %}selected{% endif %}>4th Year</option>
            </select>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn-primary">ğŸ’¾ Save Changes</button>
            <button type="button" class="btn-secondary" onclick="window.location.href='{% url 'student_dashboard' %}'">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </main>
</body>
</html>